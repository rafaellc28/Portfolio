(function(){angular.module("portfolioApp").controller("PortfolioController",function($scope,Educations,Publications,TypesCertificates,Companies,Projects,Languages,Labels,Sorting,Section){var serverErrorHandler;return $scope.init=function(){return this.tab=1,$scope.labels=Labels.getCurrent(),$scope.languages=Languages.getCurrent(),$scope.currentLanguage=Languages.getCurrentLanguage(),$scope.label=$scope.labels[0][$scope.currentLanguage],$scope.icon_color=$scope.label.config.icon_color,$scope.num=Sorting.number,$scope.date=Sorting.date,$scope.string=Sorting.string,$scope.user="user",$scope.proj="proj",$scope.ed="ed",$scope.ed_term="ed_term",$scope.ed_term_course="ed_term_course",$scope.comp="comp",$scope.job="job",$scope.cert="cert",$scope.type_cert="type_cert",$scope.pub="pub",$scope.item={},$scope.item[$scope.proj]=new Section(0,new Sorting(0,["-updated"],"-updated",Sorting.date)),$scope.item[$scope.ed]=new Section(0,new Sorting(0,["-end"],"-end",Sorting.date)),$scope.item[$scope.ed_term]=new Section(0,new Sorting(0,["-end"],"-end",Sorting.date)),$scope.item[$scope.ed_term_course]=new Section(0,new Sorting(0,["-grade"],"-grade",Sorting.number)),$scope.item[$scope.comp]=new Section(0,new Sorting(0,["-last_job_date"],"-last_job_date",Sorting.date)),$scope.item[$scope.job]=new Section(0,new Sorting(0,["-end"],"-end",Sorting.date)),$scope.item[$scope.cert]=new Section(0,new Sorting(0,["-issued"],"-issued",Sorting.date)),$scope.item[$scope.pub]=new Section(0,new Sorting(0,["-published"],"-published",Sorting.date)),$scope.item[$scope.type_cert]=new Section(0,new Sorting(0,["name"],"name",Sorting.string)),this.projectsService=new Projects(serverErrorHandler),$scope.projects=this.projectsService.all(),this.educationsService=new Educations(serverErrorHandler),$scope.educations=this.educationsService.all(),this.publicationsService=new Publications(serverErrorHandler),$scope.publications=this.publicationsService.all(),this.typesCertificatesService=new TypesCertificates(serverErrorHandler),$scope.typesCertificates=this.typesCertificatesService.all(),this.companiesService=new Companies(serverErrorHandler),$scope.companies=this.companiesService.all()},$scope.setCurrentLanguage=function(){return $scope.currentLanguage=Languages.getCurrentLanguage(),$scope.label=$scope.labels[0][$scope.currentLanguage],$scope.icon_color=$scope.label.config.icon_color},$scope.getIconColor=function(){return $scope.icon_color},$scope.popover_message=function(title,links,attachments,tags,awards){return Section.popover_message(title,links,attachments,tags,awards,$scope.label)},$scope.selectTab=function(selTab){return this.tab=selTab},$scope.isSelected=function(selTab){return this.tab===selTab},$scope.validateOrder=function(id,parent_id){return $scope.item[id].validateOrder(parent_id)},$scope.getOrderField=function(id,parent_id){return $scope.item[id].getOrder(parent_id).currentOrderField()},$scope.getOrderReversibility=function(id,parent_id){return $scope.item[id].getOrder(parent_id).currentOrderReversibility()},$scope.getOrderType=function(id,parent_id){return $scope.item[id].getOrder(parent_id).getCurrentType()},$scope.currentOrderBySection=function(id,parent_id,field){return $scope.validateOrder(id,parent_id),$scope.item[id].getOrder(parent_id).checkOrderByField(field)},$scope.updateOrder=function(id,parent_id,field,type){return $scope.item[id].getOrder(parent_id)?$scope.item[id].getOrder(parent_id).updateOrder(field,type):$scope.item[id].addOrder(parent_id,new Sorting(id,parent_id,[field],field,type))},$scope.selectItem=function(id,sel){return $scope.item[id].setId($scope.isSelectedItem(id,sel)?0:sel)},$scope.isSelectedItem=function(id,sel){return $scope.item[id].getId()===sel},serverErrorHandler=function(){return alert("Server error in PortfolioController, please try again!")}})}).call(this);